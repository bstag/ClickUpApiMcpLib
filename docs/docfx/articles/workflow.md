# Documentation Workflow

This document outlines the process for updating and maintaining the `ClickUp.Api.Client` SDK documentation generated by DocFX.

## Local Development and Updates

1.  **Prerequisites:**
    *   Ensure [DocFX is installed globally](https://dotnet.github.io/docfx/tutorial/docfx_getting_started.html#2-install-docfx): `dotnet tool update -g docfx --version "2.75.2"` (or latest stable).
    *   Clone the repository.

2.  **Modifying Content:**
    *   **API Documentation (from source code comments):**
        *   Update XML documentation comments (`<summary>`, `<param>`, `<returns>`, etc.) directly in the C# source files (`.cs`) within the `src/` directory (e.g., `src/ClickUp.Api.Client/Services/TaskService.cs`).
    *   **Conceptual Articles:**
        *   Edit existing Markdown files or add new ones in the `docs/docfx/articles/` directory.
        *   If adding new articles, ensure they are linked in `docs/docfx/toc.yml`.
    *   **Site Structure/Navigation:**
        *   Modify `docs/docfx/toc.yml` for changes to the main table of contents.
        *   Edit `docs/docfx/index.md` for homepage content.
    *   **Configuration:**
        *   Changes to site metadata, project references for API docs, or build options are made in `docs/docfx/docfx.json`.

3.  **Building and Previewing Locally:**
    *   Open a terminal or command prompt.
    *   Navigate to the repository root.
    *   To build the documentation:
        ```bash
        docfx build docs/docfx/docfx.json
        ```
    *   To build and serve locally for preview (usually on `http://localhost:8080`):
        ```bash
        docfx build docs/docfx/docfx.json --serve
        ```
    *   Review the locally served site for correctness, broken links, and formatting issues.

4.  **Committing Changes:**
    *   Commit all modified files, including:
        *   Source code files (`.cs`) if API comments were changed.
        *   Markdown files (`.md`) in `docs/docfx/articles/` or root.
        *   `docs/docfx/toc.yml`, `docs/docfx/index.md`.
        *   `docs/docfx/docfx.json` if configuration was updated.
        *   Any new image files in `docs/docfx/images/`.
    *   Push changes to the relevant branch.

## Automated Build and Deployment (CI/CD - Conceptual)

A Continuous Integration/Continuous Deployment (CI/CD) pipeline (e.g., using GitHub Actions) should be established to automate the building and deployment of the documentation site whenever changes are pushed to the main branch.

**Conceptual GitHub Actions Workflow (`.github/workflows/docs.yml`):**

```yaml
name: Build and Deploy DocFX Site

on:
  push:
    branches:
      - main # Or your default branch
    paths:
      - 'src/**'
      - 'docs/docfx/**'
      - '.github/workflows/docs.yml'

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup .NET SDK
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '8.x' # Ensure this matches a version compatible with DocFX tool

    - name: Install DocFX
      run: dotnet tool update -g docfx --version "2.75.2" # Use a specific, tested version

    - name: Build DocFX Project
      run: docfx build docs/docfx/docfx.json

    - name: Deploy to GitHub Pages # Or your chosen static site host
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: docs/docfx/_site
        # Optional: configure custom domain, commit message, etc.
        # cname: docs.example.com
```

**Key elements of the CI/CD workflow:**
-   **Trigger:** Runs on pushes to the main branch, specifically when files in `src/` (for API doc changes) or `docs/docfx/` are modified.
-   **Environment:** Sets up a .NET environment and installs DocFX.
-   **Build:** Runs `docfx build` to generate the static site into `docs/docfx/_site`.
-   **Deploy:** Deploys the contents of `docs/docfx/_site` to a hosting service (e.g., GitHub Pages, Azure Static Web Apps, Netlify). For GitHub Pages, `peaceiris/actions-gh-pages` is a common action.

This automated process ensures that the live documentation always reflects the latest changes in the codebase and conceptual articles.
